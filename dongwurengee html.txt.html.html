<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人格动物志 | 星瞳测测</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 基础样式和品牌色彩系统 */
        :root {
            --primary-gradient: linear-gradient(to bottom, #E6E6FA, #FFFFFF);
            --accent-color: #191970;
            --highlight-gold: #FFD700;
            --highlight-purple: #4B0082;
            --glass-effect: rgba(255, 255, 255, 0.25);
            --shadow-light: rgba(230, 230, 250, 0.3);
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: var(--primary-gradient);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        /* 紫色星空背景效果 */
        .stars-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(to bottom, #1a0a2a, #2d1b4a, #1a0a2a);
        }
        
        .star {
            position: absolute;
            background-color: #E6E6FA;
            border-radius: 50%;
            animation: twinkle 3s infinite alternate;
        }
        
        .star-large {
            width: 3px;
            height: 3px;
            box-shadow: 0 0 10px 2px rgba(230, 230, 250, 0.8);
        }
        
        .star-medium {
            width: 2px;
            height: 2px;
            box-shadow: 0 0 6px 1px rgba(230, 230, 250, 0.6);
        }
        
        .star-small {
            width: 1px;
            height: 1px;
            box-shadow: 0 0 4px 1px rgba(230, 230, 250, 0.4);
        }
        
        .constellation {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(230, 230, 250, 0.1) 1px, transparent 2px),
                radial-gradient(circle at 80% 70%, rgba(230, 230, 250, 0.1) 1px, transparent 2px),
                radial-gradient(circle at 40% 80%, rgba(230, 230, 250, 0.1) 1px, transparent 2px);
            background-size: 300px 300px, 400px 400px, 500px 500px;
        }
        
        @keyframes twinkle {
            0% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
            100% { opacity: 0.3; transform: scale(1); }
        }
        
        /* 水晶球质感元素 */
        .crystal-ball {
            background: var(--glass-effect);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                inset 0 0 20px rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .crystal-ball::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), transparent 70%);
            z-index: -1;
        }
        
        /* 星瞳品牌标题 */
        .brand-title {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        .brand-title h1 {
            color: var(--accent-color);
            font-size: 36px;
            margin-bottom: 10px;
            font-weight: 700;
            letter-spacing: 2px;
            text-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .brand-title .subtitle {
            color: var(--highlight-purple);
            font-size: 16px;
            font-weight: 300;
        }
        
        .brand-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 3px;
            background: linear-gradient(to right, transparent, var(--highlight-gold), transparent);
            margin: 15px auto 0;
        }
        
        /* 测试卡片 */
        .quiz-card {
            background-color: white;
            border-radius: 30px;
            box-shadow: 0 15px 35px var(--shadow-light);
            padding: 40px;
            margin: 20px auto;
            max-width: 800px;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }
        
        .quiz-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(to right, var(--highlight-purple), var(--highlight-gold));
            border-radius: 30px 30px 0 0;
        }
        
        /* 进度指示器 */
        .progress-container {
            width: 100%;
            height: 8px;
            background: rgba(230, 230, 250, 0.3);
            border-radius: 4px;
            margin: 20px 0 40px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, var(--highlight-purple), var(--accent-color));
            border-radius: 4px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .progress-text {
            text-align: center;
            color: var(--accent-color);
            font-size: 14px;
            margin-top: 10px;
        }
        
        /* 问题样式 */
        .question-container {
            margin-bottom: 30px;
        }
        
        .question-text {
            font-size: 22px;
            color: var(--accent-color);
            line-height: 1.5;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 500;
        }
        
        /* 选项样式 - 星瞳专属设计 */
        .options-container {
            display: grid;
            gap: 15px;
        }
        
        .option-item {
            background: white;
            border-radius: 20px;
            padding: 18px 25px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid rgba(230, 230, 250, 0.5);
            position: relative;
            overflow: hidden;
            font-size: 16px;
            color: #333;
        }
        
        .option-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(230, 230, 250, 0.1), rgba(255, 255, 255, 0.3));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .option-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
            border-color: var(--accent-color);
        }
        
        .option-item:hover::before {
            opacity: 1;
        }
        
        .option-item.selected {
            border-color: var(--accent-color);
            box-shadow: 0 0 20px rgba(230, 230, 250, 0.7);
            background: rgba(230, 230, 250, 0.1);
            transform: translateY(-3px);
        }
        
        .option-item.selected::after {
            content: '✓';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-color);
            font-weight: bold;
            font-size: 18px;
        }
        
        /* 按钮样式 */
        .btn {
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 30px;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 5px 15px rgba(25, 25, 112, 0.2);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover {
            background: #2a2a8a;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(25, 25, 112, 0.3);
        }
        
        .btn-gold {
            background: var(--highlight-gold);
            color: var(--accent-color);
            font-weight: bold;
        }
        
        .btn-outline {
            background: transparent;
            color: var(--accent-color);
            border: 2px solid var(--accent-color);
        }
        
        .btn-large {
            padding: 18px 50px;
            font-size: 20px;
            font-weight: bold;
        }
        
        .btn-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        /* 结果徽章 */
        .result-badge {
            width: 320px;
            height: 320px;
            margin: 0 auto 5px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        .animal-icon {
            width: 240px;
            height: 240px;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1));
        }
        
        .animal-name {
            font-size: 36px;
            font-weight: bold;
            text-align: center;
            margin-top: 5px;
        }
        
        .animal-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 30px 0;
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .animal-type {
            font-size: 28px;
            color: var(--highlight-purple);
            margin-bottom: 20px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            background: linear-gradient(135deg, var(--highlight-purple), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* 页面布局 */
        .page {
            display: none;
            padding: 40px 20px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .active {
            display: block;
        }
        
        h1, h2, h3 {
            color: var(--accent-color);
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 28px;
            text-align: center;
        }
        
        h2 {
            font-size: 22px;
            margin: 25px 0 15px;
            position: relative;
            padding-bottom: 10px;
        }
        
        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background: var(--highlight-gold);
        }
        
        p {
            line-height: 1.7;
            margin-bottom: 15px;
            color: #444;
        }
        
        /* 结果内容区域 */
        .result-section {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            width: 100%;
            max-width: 800px;
        }
        
        .friend-perspective {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(75, 0, 130, 0.05));
            border-left: 4px solid var(--highlight-gold);
            margin-top: 20px;
        }
        
        /* 平衡指南特殊设计 */
        .balance-guide {
            background: linear-gradient(135deg, rgba(230, 230, 250, 0.2), rgba(255, 255, 255, 0.8));
            border-radius: 20px;
            padding: 30px;
            margin: 40px 0;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .balance-guide::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, var(--highlight-purple), var(--accent-color), var(--highlight-gold));
        }
        
        .balance-guide h2 {
            text-align: center;
            color: var(--accent-color);
            margin-bottom: 25px;
        }
        
        .guide-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .guide-step {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: var(--transition);
        }
        
        .guide-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .step-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: var(--accent-color);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        /* 品牌脚注 */
        .brand-footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(230, 230, 250, 0.5);
            color: var(--accent-color);
            font-size: 14px;
        }
        
        .brand-footer .paw {
            font-size: 18px;
            margin: 0 5px;
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .quiz-card {
                margin: 10px;
                padding: 25px;
                border-radius: 20px;
            }
            
            .question-text {
                font-size: 20px;
            }
            
            .animal-section {
                flex-direction: column;
                gap: 20px;
            }
            
            .btn-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
            }
            
            .guide-steps {
                grid-template-columns: 1fr;
            }
            
            .result-badge {
                width: 280px;
                height: 280px;
            }
            
            .animal-icon {
                width: 200px;
                height: 200px;
            }
            
            .animal-name {
                font-size: 32px;
            }
            
            .animal-type {
                font-size: 24px;
            }
        }
        
        /* 加载动画 */
        .loading-dots {
            display: inline-flex;
            gap: 5px;
        }
        
        .loading-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-color);
            animation: bounce 1.4s infinite ease-in-out both;
        }
        
        .loading-dots span:nth-child(1) { animation-delay: -0.32s; }
        .loading-dots span:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes bounce {
            0%, 80%, 100% { 
                transform: scale(0);
            } 40% { 
                transform: scale(1.0);
            }
        }
        
        /* 隐藏问题计数器 */
        #questionCounter {
            display: none;
        }
        
        /* 结果页面整体优化 */
        .results-container {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }
        
        .animal-result-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(230,230,250,0.3));
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }
        
        .animal-result-card:hover {
            transform: translateY(-5px);
        }
    </style>
</head>
<body>
    <!-- 紫色星空背景 -->
    <div class="stars-bg" id="starsBg">
        <div class="constellation"></div>
    </div>
    
    <!-- 答题页 -->
    <div class="page active" id="quizPage">
        <div class="quiz-card">
            <div class="brand-title">
                <h1>人格动物志</h1>
                <div class="subtitle">探索你的社交面具与内在原型</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">0/40</div>
            
            <div class="question-container">
                <div class="question-text" id="questionText">问题加载中<span class="loading-dots"><span></span><span></span><span></span></span></div>
                
                <div class="options-container" id="optionsContainer">
                    <!-- 选项将通过JavaScript动态生成 -->
                </div>
            </div>
            
            <div class="btn-container">
                <button class="btn btn-outline" id="prevQuestion">上一题</button>
                <div id="questionCounter">第 <span id="currentQuestion">1</span> 题 / 共 40 题</div>
            </div>
            
            <!-- 品牌脚注 -->
            <div class="brand-footer">
                <span class="paw">🐾</span> 本测试由「星瞳测测」精心设计，探索自我，从了解开始 <span class="paw">🐾</span>
            </div>
        </div>
    </div>
    
    <!-- 结果页 -->
    <div class="page" id="resultPage">
        <div class="quiz-card">
            <div class="brand-title">
                <h1>你的星瞳人格动物志</h1>
                <div class="subtitle">发现未知的自己</div>
            </div>
            
            <div class="results-container">
                <!-- 外在动物部分 -->
                <div class="animal-result-card">
                    <div class="animal-section">
                        <div class="animal-type">外在动物</div>
                        <div class="result-badge crystal-ball">
                            <canvas class="animal-icon" id="outerAnimalCanvas" width="240" height="240"></canvas>
                        </div>
                        <div class="animal-name" id="outerAnimalName">外在动物</div>
                        
                        <div class="result-section">
                            <h2>外在动物人格分析</h2>
                            <p id="outerAnimalAnalysis"></p>
                        </div>
                        
                        <div class="result-section friend-perspective">
                            <h2>朋友眼中的你</h2>
                            <p id="outerAnimalFriend"></p>
                        </div>
                    </div>
                </div>
                
                <!-- 内在动物部分 -->
                <div class="animal-result-card">
                    <div class="animal-section">
                        <div class="animal-type">内在动物</div>
                        <div class="result-badge crystal-ball">
                            <canvas class="animal-icon" id="innerAnimalCanvas" width="240" height="240"></canvas>
                        </div>
                        <div class="animal-name" id="innerAnimalName">内在动物</div>
                        
                        <div class="result-section">
                            <h2>内在动物人格分析</h2>
                            <p id="innerAnimalAnalysis"></p>
                        </div>
                        
                        <div class="result-section friend-perspective">
                            <h2>朋友眼中的你</h2>
                            <p id="innerAnimalFriend"></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 平衡指南 -->
            <div class="balance-guide">
                <h2>平衡指南</h2>
                <div class="guide-steps" id="balanceGuide">
                    <!-- 平衡指南内容将通过JavaScript动态生成 -->
                </div>
            </div>
            
            <!-- 按钮区域 -->
            <div class="btn-container">
                <button class="btn btn-large" id="restartTest">重新测试</button>
                <a href="https://xhslink.com/m/1HpWUO6Yhkn" target="_blank" class="btn btn-gold">前往「星瞳测测」小红书店铺</a>
            </div>
            
            <!-- 品牌脚注 -->
            <div class="brand-footer">
                <span class="paw">🐾</span> 本测试由「星瞳测测」精心设计，探索自我，从了解开始 <span class="paw">🐾</span>
            </div>
            
            <!-- 星轨ID -->
            <div style="text-align: center; margin-top: 30px; font-family: monospace; color: var(--accent-color); font-size: 14px;">
                星轨ID: <a href="https://xhslink.com/m/1HpWUO6Yhkn" target="_blank" style="color: var(--accent-color); text-decoration: underline;" id="starTrackId">ST-XXXX-XXXX</a>
            </div>
        </div>
    </div>

    <script>
        // 生成紫色星空背景
        function createStars() {
            const starsBg = document.getElementById('starsBg');
            const starCount = 300;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                
                // 随机大小分类
                const sizeType = Math.random();
                if (sizeType < 0.1) {
                    star.className = 'star star-large';
                } else if (sizeType < 0.4) {
                    star.className = 'star star-medium';
                } else {
                    star.className = 'star star-small';
                }
                
                // 随机位置
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                
                // 随机动画延迟和持续时间
                star.style.animationDelay = `${Math.random() * 5}s`;
                star.style.animationDuration = `${2 + Math.random() * 3}s`;
                
                starsBg.appendChild(star);
            }
        }
        
        // 通用函数：添加毛发/羽毛质感
        function addTexture(ctx, centerX, centerY, radiusX, radiusY, color, count) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 1;
            
            for(let i = 0; i < count; i++) {
                const angle = Math.random() * Math.PI * 2;
                const distance = (radiusX + radiusY) / 2 + Math.random() * 10;
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                
                const length = 2 + Math.random() * 6;
                const angle2 = angle + (Math.random() - 0.5) * 0.5;
                
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(
                    x + Math.cos(angle2) * length,
                    y + Math.sin(angle2) * length
                );
                ctx.stroke();
            }
        }

        // 1. 水豚
        function drawCapybara(canvas) {
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#8B4513';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            ctx.beginPath();
            
            // 头部轮廓
            ctx.ellipse(centerX, centerY, 50, 45, 0, 0, Math.PI * 2);
            
            // 左耳朵
            ctx.moveTo(centerX - 35, centerY - 30);
            ctx.ellipse(centerX - 40, centerY - 35, 12, 14, 0.3, 0, Math.PI * 2);
            
            // 右耳朵
            ctx.moveTo(centerX + 35, centerY - 30);
            ctx.ellipse(centerX + 40, centerY - 35, 12, 14, -0.3, 0, Math.PI * 2);
            
            // 眼睛
            ctx.moveTo(centerX - 22, centerY - 18);
            ctx.ellipse(centerX - 22, centerY - 18, 5, 6, 0, 0, Math.PI * 2);
            
            ctx.moveTo(centerX + 22, centerY - 18);
            ctx.ellipse(centerX + 22, centerY - 18, 5, 6, 0, 0, Math.PI * 2);
            
            // 鼻子
            ctx.moveTo(centerX - 18, centerY + 8);
            ctx.ellipse(centerX, centerY + 8, 18, 14, 0, 0, Math.PI * 2);
            
            // 鼻孔
            ctx.moveTo(centerX - 8, centerY + 5);
            ctx.ellipse(centerX - 8, centerY + 5, 2.5, 3, 0, 0, Math.PI * 2);
            
            ctx.moveTo(centerX + 8, centerY + 5);
            ctx.ellipse(centerX + 8, centerY + 5, 2.5, 3, 0, 0, Math.PI * 2);
            
            // 嘴巴
            ctx.moveTo(centerX - 12, centerY + 25);
            ctx.quadraticCurveTo(centerX, centerY + 30, centerX + 12, centerY + 25);
            
            ctx.stroke();
            addTexture(ctx, centerX, centerY, 50, 45, '#8B4513', 18);
        }

        // 2. 狐狸
        function drawFox(canvas) {
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#E2725B';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            ctx.beginPath();
            
            // 头部基础轮廓（心形，模拟狐狸脸部）
            ctx.moveTo(centerX, centerY + 35);
            ctx.bezierCurveTo(
                centerX - 45, centerY - 10,
                centerX - 50, centerY - 50,
                centerX, centerY - 55
            );
            ctx.bezierCurveTo(
                centerX + 50, centerY - 50,
                centerX + 45, centerY - 10,
                centerX, centerY + 35
            );
            
            // 左耳朵
            ctx.moveTo(centerX - 25, centerY - 40);
            ctx.lineTo(centerX - 35, centerY - 65);
            ctx.lineTo(centerX - 20, centerY - 45);
            
            // 右耳朵
            ctx.moveTo(centerX + 25, centerY - 40);
            ctx.lineTo(centerX + 35, centerY - 65);
            ctx.lineTo(centerX + 20, centerY - 45);
            
            // 脸部特征线
            ctx.moveTo(centerX - 18, centerY - 12);
            ctx.quadraticCurveTo(centerX, centerY + 12, centerX + 18, centerY - 12);
            
            // 眼睛
            ctx.moveTo(centerX - 18, centerY - 25);
            ctx.quadraticCurveTo(centerX - 12, centerY - 18, centerX - 10, centerY - 25);
            
            ctx.moveTo(centerX + 18, centerY - 25);
            ctx.quadraticCurveTo(centerX + 12, centerY - 18, centerX + 10, centerY - 25);
            
            // 鼻子
            ctx.moveTo(centerX - 6, centerY - 8);
            ctx.lineTo(centerX, centerY);
            ctx.lineTo(centerX + 6, centerY - 8);
            
            // 胡须
            ctx.moveTo(centerX - 15, centerY - 5);
            ctx.lineTo(centerX - 30, centerY - 8);
            ctx.moveTo(centerX - 15, centerY);
            ctx.lineTo(centerX - 30, centerY);
            ctx.moveTo(centerX + 15, centerY - 5);
            ctx.lineTo(centerX + 30, centerY - 8);
            ctx.moveTo(centerX + 15, centerY);
            ctx.lineTo(centerX + 30, centerY);
            
            ctx.stroke();
            addTexture(ctx, centerX, centerY, 45, 45, '#E2725B', 20);
        }

        // 3. 水獭
        function drawOtter(canvas) {
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#6B8E9C';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            ctx.beginPath();
            // 头部
            ctx.ellipse(centerX, centerY - 8, 45, 40, 0, 0, Math.PI * 2);
            
            // 耳朵
            ctx.moveTo(centerX - 28, centerY - 30);
            ctx.ellipse(centerX - 33, centerY - 35, 10, 9, 0.5, 0, Math.PI * 2);
            ctx.moveTo(centerX + 28, centerY - 30);
            ctx.ellipse(centerX + 33, centerY - 35, 10, 9, -0.5, 0, Math.PI * 2);
            
            // 眼睛
            ctx.moveTo(centerX - 18, centerY - 18);
            ctx.ellipse(centerX - 18, centerY - 18, 4, 5, 0, 0, Math.PI * 2);
            ctx.moveTo(centerX + 18, centerY - 18);
            ctx.ellipse(centerX + 18, centerY - 18, 4, 5, 0, 0, Math.PI * 2);
            
            // 鼻子
            ctx.moveTo(centerX - 10, centerY);
            ctx.ellipse(centerX, centerY, 10, 9, 0, 0, Math.PI * 2);
            
            // 胡须
            ctx.moveTo(centerX - 10, centerY + 4);
            ctx.lineTo(centerX - 30, centerY);
            ctx.moveTo(centerX - 10, centerY + 6);
            ctx.lineTo(centerX - 30, centerY + 6);
            ctx.moveTo(centerX + 10, centerY + 4);
            ctx.lineTo(centerX + 30, centerY);
            ctx.moveTo(centerX + 10, centerY + 6);
            ctx.lineTo(centerX + 30, centerY + 6);
            
            ctx.stroke();
            addTexture(ctx, centerX, centerY, 45, 40, '#6B8E9C', 18);
        }

        // 4. 浣熊
        function drawRaccoon(canvas) {
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#5D5D5D';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            ctx.beginPath();
            // 头部
            ctx.ellipse(centerX, centerY, 48, 43, 0, 0, Math.PI * 2);
            
            // 黑眼圈
            ctx.moveTo(centerX - 28, centerY - 12);
            ctx.ellipse(centerX - 22, centerY - 12, 14, 12, 0, 0, Math.PI * 2);
            ctx.moveTo(centerX + 28, centerY - 12);
            ctx.ellipse(centerX + 22, centerY - 12, 14, 12, 0, 0, Math.PI * 2);
            
            // 眼睛
            ctx.moveTo(centerX - 22, centerY - 12);
            ctx.ellipse(centerX - 22, centerY - 12, 4, 5, 0, 0, Math.PI * 2);
            ctx.moveTo(centerX + 22, centerY - 12);
            ctx.ellipse(centerX + 22, centerY - 12, 4, 5, 0, 0, Math.PI * 2);
            
            // 耳朵
            ctx.moveTo(centerX - 34, centerY - 28);
            ctx.ellipse(centerX - 40, centerY - 40, 12, 14, 0.3, 0, Math.PI * 2);
            ctx.moveTo(centerX + 34, centerY - 28);
            ctx.ellipse(centerX + 40, centerY - 40, 12, 14, -0.3, 0, Math.PI * 2);
            
            // 鼻子
            ctx.moveTo(centerX - 8, centerY + 6);
            ctx.ellipse(centerX, centerY + 6, 8, 7, 0, 0, Math.PI * 2);
            
            ctx.stroke();
            addTexture(ctx, centerX, centerY, 48, 43, '#5D5D5D', 18);
        }

        // 5. 树懒
        function drawSloth(canvas) {
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#7E6B5C';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            ctx.beginPath();
            // 头部
            ctx.ellipse(centerX, centerY, 43, 38, 0, 0, Math.PI * 2);
            
            // 面部斑纹
            ctx.moveTo(centerX - 18, centerY - 6);
            ctx.lineTo(centerX - 8, centerY - 18);
            ctx.lineTo(centerX + 8, centerY - 18);
            ctx.lineTo(centerX + 18, centerY - 6);
            
            // 眼睛
            ctx.moveTo(centerX - 12, centerY - 12);
            ctx.ellipse(centerX - 12, centerY - 12, 2.5, 4, 0, 0, Math.PI * 2);
            ctx.moveTo(centerX + 12, centerY - 12);
            ctx.ellipse(centerX + 12, centerY - 12, 2.5, 4, 0, 0, Math.PI * 2);
            
            // 鼻子
            ctx.moveTo(centerX - 4, centerY + 6);
            ctx.ellipse(centerX, centerY + 6, 6, 5, 0, 0, Math.PI * 2);
            
            // 嘴巴 - 微笑
            ctx.moveTo(centerX - 10, centerY + 12);
            ctx.quadraticCurveTo(centerX, centerY + 18, centerX + 10, centerY + 12);
            
            ctx.stroke();
            addTexture(ctx, centerX, centerY, 43, 38, '#7E6B5C', 15);
        }

        // 6. 企鹅
        function drawPenguin(canvas) {
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#2C3E50';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            ctx.beginPath();
            // 身体
            ctx.ellipse(centerX, centerY, 48, 56, 0, 0, Math.PI * 2);
            
            // 面部白色区域
            ctx.moveTo(centerX - 28, centerY - 12);
            ctx.ellipse(centerX, centerY - 6, 28, 34, 0, 0, Math.PI * 2, true);
            
            // 眼睛
            ctx.moveTo(centerX - 12, centerY - 18);
            ctx.ellipse(centerX - 12, centerY - 18, 4, 5, 0, 0, Math.PI * 2);
            ctx.moveTo(centerX + 12, centerY - 18);
            ctx.ellipse(centerX + 12, centerY - 18, 4, 5, 0, 0, Math.PI * 2);
            
            // 喙
            ctx.moveTo(centerX - 6, centerY);
            ctx.lineTo(centerX, centerY + 10);
            ctx.lineTo(centerX + 6, centerY);
            
            ctx.stroke();
            // 企鹅不需要毛发质感，但可以添加一些羽毛纹理
            addTexture(ctx, centerX, centerY, 48, 56, '#2C3E50', 12);
        }

        // 7. 小熊猫
        function drawRedPanda(canvas) {
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#C45638';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            ctx.beginPath();
            // 头部
            ctx.ellipse(centerX, centerY, 48, 43, 0, 0, Math.PI * 2);
            
            // 耳朵
            ctx.moveTo(centerX - 34, centerY - 24);
            ctx.ellipse(centerX - 40, centerY - 35, 14, 12, 0.3, 0, Math.PI * 2);
            ctx.moveTo(centerX + 34, centerY - 24);
            ctx.ellipse(centerX + 40, centerY - 35, 14, 12, -0.3, 0, Math.PI * 2);
            
            // 面部斑纹
            ctx.moveTo(centerX - 22, centerY - 6);
            ctx.lineTo(centerX - 12, centerY - 18);
            ctx.lineTo(centerX + 12, centerY - 18);
            ctx.lineTo(centerX + 22, centerY - 6);
            
            // 眼睛
            ctx.moveTo(centerX - 18, centerY - 12);
            ctx.ellipse(centerX - 18, centerY - 12, 4, 5, 0, 0, Math.PI * 2);
            ctx.moveTo(centerX + 18, centerY - 12);
            ctx.ellipse(centerX + 18, centerY - 12, 4, 5, 0, 0, Math.PI * 2);
            
            // 鼻子
            ctx.moveTo(centerX - 4, centerY + 6);
            ctx.ellipse(centerX, centerY + 6, 6, 5, 0, 0, Math.PI * 2);
            
            ctx.stroke();
            addTexture(ctx, centerX, centerY, 48, 43, '#C45638', 20);
        }

        // 8. 猫头鹰
        function drawOwl(canvas) {
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = '#8B7355';
            ctx.lineWidth = 2;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            ctx.beginPath();
            // 脸部轮廓（心形）
            ctx.moveTo(centerX, centerY + 25);
            ctx.bezierCurveTo(
                centerX - 40, centerY - 5,
                centerX - 45, centerY - 40,
                centerX, centerY - 45
            );
            ctx.bezierCurveTo(
                centerX + 45, centerY - 40,
                centerX + 40, centerY - 5,
                centerX, centerY + 25
            );
            
            // 大眼睛
            ctx.moveTo(centerX - 18, centerY - 12);
            ctx.ellipse(centerX - 18, centerY - 12, 14, 18, 0, 0, Math.PI * 2);
            ctx.moveTo(centerX + 18, centerY - 12);
            ctx.ellipse(centerX + 18, centerY - 12, 14, 18, 0, 0, Math.PI * 2);
            
            // 瞳孔
            ctx.moveTo(centerX - 18, centerY - 12);
            ctx.ellipse(centerX - 18, centerY - 12, 5, 6, 0, 0, Math.PI * 2);
            ctx.moveTo(centerX + 18, centerY - 12);
            ctx.ellipse(centerX + 18, centerY - 12, 5, 6, 0, 0, Math.PI * 2);
            
            // 喙
            ctx.moveTo(centerX - 5, centerY + 6);
            ctx.lineTo(centerX, centerY + 18);
            ctx.lineTo(centerX + 5, centerY + 6);
            
            ctx.stroke();
            addTexture(ctx, centerX, centerY, 40, 40, '#8B7355', 18);
        }
        
        // 动物绘制函数映射
        const animalDrawFunctions = {
            "水豚": drawCapybara,
            "狐狸": drawFox,
            "水獭": drawOtter,
            "浣熊": drawRaccoon,
            "树懒": drawSloth,
            "企鹅": drawPenguin,
            "小熊猫": drawRedPanda,
            "猫头鹰": drawOwl
        };

        // 完整的60道题库
        const fullQuestionBank = [
            {
                text: "当你走进一个满是陌生人的派对，你会？",
                options: [
                    "直接走向食物区，毕竟干饭人干饭魂",
                    "找个角落刷手机，假装自己很忙的样子", 
                    "主动找人搭讪，成为全场社交牛逼症患者",
                    "观察谁看起来最有趣，然后慢慢靠近"
                ]
            },
            {
                text: "你的手机相册里最多的是什么？",
                options: [
                    "各种美食照片，深夜放毒专用",
                    "自拍和与朋友的合照，记录美好瞬间",
                    "搞笑表情包和网络梗图，聊天必备",
                    "风景照和文艺小清新图片，朋友圈素材"
                ]
            },
            {
                text: "当朋友向你倾诉烦恼时，你通常会？",
                options: [
                    "给出实际建议，像个生活小能手",
                    "认真倾听并给予情感支持，暖心小天使",
                    "讲个笑话转移注意力，气氛组担当",
                    "分析问题根源，展现你的逻辑思维能力"
                ]
            },
            {
                text: "周末早晨醒来，你的第一反应是？",
                options: [
                    "再睡五分钟...然后两小时过去了",
                    "立刻起床，开启元气满满的一天",
                    "躺在床上刷手机，开启网上冲浪模式",
                    "思考今天要做什么，然后继续躺着"
                ]
            },
            {
                text: "你的购物车通常是什么样的？",
                options: [
                    "全是零食和好吃的，吃货认证",
                    "时尚单品和化妆品，精致生活必备",
                    "各种奇怪但有趣的小玩意，猎奇爱好者",
                    "实用主义至上，只买必需品"
                ]
            },
            {
                text: "当你在工作中犯了一个小错误，你会？",
                options: [
                    "立刻承认并道歉，诚实小标兵",
                    "试图悄悄修正，希望没人发现",
                    "用幽默化解尴尬，气氛调节大师",
                    "分析错误原因，防止再次发生"
                ]
            },
            {
                text: "你的手机闹钟设置是？",
                options: [
                    "只有一个闹钟，相信自己的意志力",
                    "设置十个闹钟，每隔五分钟响一次",
                    "根据当天心情随意设置，随性派",
                    "精心计算睡眠周期，科学起床法"
                ]
            },
            {
                text: "当有人插队时，你会？",
                options: [
                    "直接指出，维护正义的使者",
                    "心里不爽但不敢说，默默生气",
                    "开玩笑式地提醒，既表达不满又不伤和气",
                    "分析插队者的动机，试图理解对方"
                ]
            },
            {
                text: "你的微信聊天风格是？",
                options: [
                    "言简意赅，能一句话绝不用两句",
                    "喜欢发表情包和梗图，欢乐源泉",
                    "认真回复每一条消息，聊天小天使",
                    "喜欢发长语音，语音消息爱好者"
                ]
            },
            {
                text: "当你看到镜子里的自己，你会？",
                options: [
                    "欣赏自己的美貌，自恋一下",
                    "立刻找角度自拍，记录美好瞬间",
                    "做鬼脸，跟自己玩耍",
                    "冷静分析今天的穿着是否得体"
                ]
            },
            {
                text: "你的解压方式是什么？",
                options: [
                    "大吃一顿，美食治愈一切",
                    "疯狂购物，买买买是王道",
                    "看搞笑视频，笑到肚子痛",
                    "独自散步或冥想，放空自己"
                ]
            },
            {
                text: "当朋友讲了一个不好笑的笑话，你会？",
                options: [
                    "直接说不好笑，诚实到残忍",
                    "勉强笑一下，给点面子",
                    "笑得比谁都大声，捧场王本人",
                    "分析为什么这个笑话不好笑"
                ]
            },
            {
                text: "你的周末计划通常是？",
                options: [
                    "宅在家里，享受肥宅快乐生活",
                    "约朋友出去玩，社交达人",
                    "尝试新事物，冒险家精神",
                    "完成未完成的工作，勤劳小蜜蜂"
                ]
            },
            {
                text: "当你遇到喜欢的人，你会？",
                options: [
                    "直接表白，勇敢追爱",
                    "暗恋并默默关注，羞涩小可爱",
                    "想办法吸引对方注意，恋爱小天才",
                    "理性分析是否合适，谨慎派"
                ]
            },
            {
                text: "你的手机电量低于多少时会焦虑？",
                options: [
                    "50%就开始找充电器，电量焦虑症",
                    "20%才有点担心，心大型",
                    "10%还能淡定使用，冒险家",
                    "随时保持满电，安全感满满"
                ]
            },
            {
                text: "当朋友迟到时，你会？",
                options: [
                    "直接表达不满，时间观念强",
                    "理解并耐心等待，温柔体贴",
                    "开玩笑抱怨，既表达不满又不伤感情",
                    "利用等待时间做自己的事，效率达人"
                ]
            },
            {
                text: "你的外卖订单历史最能体现什么？",
                options: [
                    "尝试各种新餐厅，美食探险家",
                    "总是点同样的几家，专一型选手",
                    "根据心情随意点，随性派",
                    "精心计算热量和营养，健康达人"
                ]
            },
            {
                text: "当你看到一个特别好笑的段子，你会？",
                options: [
                    "立刻分享给所有好友，快乐传播者",
                    "独自笑到停不下来，自嗨型",
                    "收藏起来以后用，梗图收藏家",
                    "分析为什么好笑，理性派"
                ]
            },
            {
                text: "你的旅行风格是？",
                options: [
                    "精心规划每个细节，计划控",
                    "随心所欲，走到哪算哪，自由灵魂",
                    "拍照打卡型，朋友圈素材收集者",
                    "深度体验当地文化，文化探索者"
                ]
            },
            {
                text: "当有人夸你时，你的反应是？",
                options: [
                    "大方接受并感谢，自信满满",
                    "谦虚否认，害羞型",
                    "开玩笑回应，幽默化解",
                    "分析对方夸赞的动机，理性派"
                ]
            },
            {
                text: "你的手机里最多的APP类型是？",
                options: [
                    "社交软件，社交达人",
                    "游戏APP，网瘾少年/少女",
                    "学习工具，学霸本霸",
                    "购物软件，剁手党"
                ]
            },
            {
                text: "当你遇到困难时，你的第一反应是？",
                options: [
                    "自己想办法解决，独立自主",
                    "立刻求助朋友，团队协作型",
                    "先吐槽发泄情绪，情绪释放者",
                    "冷静分析问题，逻辑思考者"
                ]
            },
            {
                text: "你的房间通常是什么状态？",
                options: [
                    "整洁有序，强迫症患者",
                    "有点乱但自己知道东西在哪，乱中有序",
                    "经常大扫除但很快又乱了，循环往复",
                    "艺术性混乱，创意工作者的房间"
                ]
            },
            {
                text: "当你听到一首喜欢的歌，你会？",
                options: [
                    "单曲循环直到听腻，专一型",
                    "立刻分享给朋友，安利小能手",
                    "研究歌词和背景，深度爱好者",
                    "随缘听，不刻意追求"
                ]
            },
            {
                text: "你的早餐通常是什么？",
                options: [
                    "精心准备的营养早餐，健康生活",
                    "随便吃点或不吃，随性派",
                    "外卖解决，现代生活代表",
                    "根据心情决定，多样化选择"
                ]
            },
            {
                text: "当朋友做出一个你不同意的决定，你会？",
                options: [
                    "直接表达反对意见，直言不讳",
                    "尊重对方选择，包容型",
                    "委婉提出建议，沟通高手",
                    "分析利弊帮助对方决策，理性支持者"
                ]
            },
            {
                text: "你的周末睡懒觉能力如何？",
                options: [
                    "能睡到下午，睡神附体",
                    "生物钟固定，想睡也睡不着",
                    "取决于前晚熬夜程度，弹性睡眠",
                    "设置闹钟但经常按掉，挣扎型"
                ]
            },
            {
                text: "当你看到一个特别可爱的宠物，你会？",
                options: [
                    "立刻上前互动，宠物爱好者",
                    "远远欣赏，害羞型",
                    "拍照分享到社交媒体，内容创作者",
                    "研究宠物品种和习性，知识型"
                ]
            },
            {
                text: "你的微信朋友圈通常是？",
                options: [
                    "生活日常分享，记录生活",
                    "精心策划的内容，形象管理大师",
                    "很少发朋友圈，神秘人物",
                    "各种转发和分享，信息传播者"
                ]
            },
            {
                text: "当计划被打乱时，你的反应是？",
                options: [
                    "非常焦虑，计划控的崩溃",
                    "灵活调整，随遇而安",
                    "幽默应对，苦中作乐",
                    "分析新情况的利弊，理性适应"
                ]
            },
            {
                text: "当你收到一条令人困惑的消息，你会？",
                options: [
                    "直接问清楚，不喜欢猜测",
                    "反复琢磨，试图理解深层含义",
                    "发个表情包回应，避免尴尬",
                    "先放着，等对方主动解释"
                ]
            },
            {
                text: "你的学习/工作桌面是怎样的？",
                options: [
                    "整洁有序，每样东西都有固定位置",
                    "有点乱但能找到需要的东西",
                    "堆满各种小物件和装饰品",
                    "只有电脑和水杯，极简主义"
                ]
            },
            {
                text: "当你需要做重要决定时，你更依赖？",
                options: [
                    "直觉和第一感觉",
                    "朋友和家人的建议",
                    "数据和事实分析",
                    "过去的经验和教训"
                ]
            },
            {
                text: "你的社交媒体使用习惯是？",
                options: [
                    "频繁更新，分享生活点滴",
                    "偶尔发帖，内容精心策划",
                    "主要浏览，很少主动发内容",
                    "几乎不用，更喜欢现实生活"
                ]
            },
            {
                text: "当你感到无聊时，通常会？",
                options: [
                    "找朋友聊天或约见面",
                    "刷视频或玩游戏消磨时间",
                    "学习新技能或知识",
                    "发呆或思考人生"
                ]
            },
            {
                text: "你如何看待流行趋势？",
                options: [
                    "紧跟潮流，尝试最新事物",
                    "选择性跟随，只采纳适合自己的",
                    "不太在意，坚持自己的风格",
                    "批判性看待，分析背后的原因"
                ]
            },
            {
                text: "你的假期计划通常是？",
                options: [
                    "详细规划每一天的活动",
                    "有个大致方向，灵活调整",
                    "完全随性，走到哪算哪",
                    "宅在家里休息，恢复能量"
                ]
            },
            {
                text: "当你与别人意见不合时，你会？",
                options: [
                    "坚持己见，毕竟'我说的都对'",
                    "寻求折中方案，主打和和气气",
                    "幽默化解，'只要我不尴尬，尴尬的就是别人'",
                    "保留意见，懂得'尊重他人命运'"
                ]
            },
            {
                text: "你更喜欢哪种类型的电影？",
                options: [
                    "动作冒险片，追求肾上腺素飙升的快感",
                    "浪漫喜剧，甜到齁死单身狗的那种",
                    "悬疑推理，享受脑子不够用的烧脑挑战",
                    "文艺剧情，深夜emo必备良品"
                ]
            },
            {
                text: "你如何看待失败？",
                options: [
                    "视为学习机会，'在哪里跌倒就在哪里躺会儿'",
                    "感到沮丧但很快恢复，算是摆烂但没完全摆",
                    "用幽默化解，'笑死，问题不大'",
                    "深入分析原因，确保同一个坑绝不踩两次"
                ]
            },
            {
                text: "当你在社交媒体上看到争议话题，你会？",
                options: [
                    "积极参与讨论，瞬间化身键盘侠",
                    "默默围观，安心做个吃瓜群众",
                    "分享给朋友，'一起来吃瓜'",
                    "直接划走，主打一个'与我无瓜'"
                ]
            },
            {
                text: "你更喜欢哪种学习方式？",
                options: [
                    "直接上手实操，在实践中成长",
                    "看视频听讲解，眼睛和耳朵是我的学习搭子",
                    "自己看书研究，享受独自美丽的学霸时光",
                    "和小伙伴讨论，在思维碰撞中火花四溅"
                ]
            },
            {
                text: "当你面对多个任务时，你会？",
                options: [
                    "按顺序一个一个完成，稳如老狗",
                    "同时进行多个任务，时间管理大师就是我",
                    "先完成简单的，建立自信再说",
                    "先完成最重要的，抓住重点其他随缘"
                ]
            },
            {
                text: "你如何应对突如其来的变化？",
                options: [
                    "立即调整计划，随机应变小能手",
                    "感到焦虑需要时间适应，'让我缓缓'",
                    "保持乐观，'问题不大，心态要好'",
                    "分析变化利弊，'让子弹飞一会儿'"
                ]
            },
            {
                text: "你更喜欢哪种类型的书籍？",
                options: [
                    "小说故事类，在别人的故事里流自己的泪",
                    "实用技能类，坚信技多不压身",
                    "心理哲学类，试图看透人生真谛",
                    "传记历史类，以史为鉴可以知兴替"
                ]
            },
            {
                text: "当你在团队中工作时，你通常扮演什么角色？",
                options: [
                    "领导组织者，团队的主心骨",
                    "执行配合者，靠谱的打工人",
                    "创意提供者，团队的点子王",
                    "协调沟通者，团队的粘合剂"
                ]
            },
            {
                text: "你如何对待自己的情绪？",
                options: [
                    "直接表达，情绪都写在脸上",
                    "控制情绪保持理性，做个情绪稳定的成年人",
                    "通过其他方式发泄，转移注意力大法",
                    "分析情绪产生原因，自我剖析大师"
                ]
            },
            {
                text: "你更喜欢哪种类型的音乐？",
                options: [
                    "流行轻音乐，耳熟能详跟着哼",
                    "摇滚电子音乐，蹦迪选手必备",
                    "古典纯音乐，高雅艺术爱好者",
                    "民谣乡村音乐，文艺青年标配"
                ]
            },
            {
                text: "当你面对批评时，你会？",
                options: [
                    "认真听取并反思，有则改之无则加勉",
                    "感到受伤但不会表现出来，表面笑嘻嘻心里MMP",
                    "为自己辩解，'我不是我没有别瞎说'",
                    "分析批评合理性，选择性听取"
                ]
            },
            {
                text: "你更喜欢哪种类型的运动？",
                options: [
                    "团队运动，要赢一起赢",
                    "个人运动，享受独自美丽",
                    "对抗性运动，不服来战",
                    "舒缓运动，佛系养生"
                ]
            },
            {
                text: "当你感到压力很大时，你会？",
                options: [
                    "找人倾诉，说出来就好了",
                    "独自消化，自我调节大师",
                    "通过运动释放，流汗解压法",
                    "专注于解决问题，从根源消除压力"
                ]
            },
            {
                text: "你更喜欢哪种社交方式？",
                options: [
                    "大型聚会活动，社交牛逼症发作",
                    "小范围亲密聚会，高质量社交",
                    "一对一深度交流，灵魂对话",
                    "线上社交互动，网友奔现预备役"
                ]
            },
            {
                text: "你如何看待金钱和财富？",
                options: [
                    "追求财务自由，目标是早日退休",
                    "够用就好，知足常乐",
                    "享受花钱快乐，及时行乐主义者",
                    "理性规划理财，稳健型选手"
                ]
            },
            {
                text: "你更喜欢哪种类型的食物？",
                options: [
                    "传统家常菜，妈妈的味道最温暖",
                    "异国创意料理，舌尖上的冒险",
                    "健康轻食，吃草也要优雅",
                    "重口味刺激食物，无辣不欢"
                ]
            },
            {
                text: "当你面对未知的挑战时，你会？",
                options: [
                    "兴奋并立即接受，初生牛犊不怕虎",
                    "谨慎评估后再决定，三思而后行",
                    "寻求他人意见，集思广益",
                    "先观察学习，谋定而后动"
                ]
            },
            {
                text: "你更喜欢哪种类型的环境？",
                options: [
                    "繁华都市，都市丽人/型男的生活",
                    "宁静乡村，向往的生活",
                    "海滨湖畔，面朝大海春暖花开",
                    "山林自然，归园田居"
                ]
            },
            {
                text: "你如何看待个人成长？",
                options: [
                    "持续学习进步，卷王本王",
                    "顺其自然不强求，佛系成长",
                    "突破舒适区，人生不设限",
                    "保持现状稳定发展，稳中求进"
                ]
            },
            {
                text: "你更喜欢哪种类型的艺术？",
                options: [
                    "绘画雕塑，视觉盛宴",
                    "音乐舞蹈，律动人生",
                    "电影戏剧，人生如戏",
                    "文学诗歌，文艺青年"
                ]
            },
            {
                text: "当你面对选择时，你更倾向于？",
                options: [
                    "听从内心感受，跟着感觉走",
                    "理性分析利弊，数据说话",
                    "咨询他人意见，听人劝吃饱饭",
                    "凭直觉决定，第一感觉最准"
                ]
            },
            {
                text: "你更喜欢哪种类型的节日庆祝方式？",
                options: [
                    "热闹聚会活动，嗨到天亮",
                    "温馨家庭聚餐，家的温暖",
                    "安静自我反思，独处时光",
                    "旅行探索新地，诗和远方"
                ]
            },
            {
                text: "你如何看待人际关系？",
                options: [
                    "广泛交友建立人脉，朋友多了路好走",
                    "深交少数知己，质量重于数量",
                    "保持适当距离，边界感很重要",
                    "随缘不强求，佛系社交"
                ]
            }
        ];

        // 动物类型定义 - 基于荣格心理学的人格类型
        const animalTypes = {
            otter: {
                name: "水獭",
                color: "#4A90E2", // 蓝色
                outerDesc: "作为外在动物，水獭代表你那活泼开朗、社交牛逼症的一面。在别人眼中，你总是那个能带动气氛的开心果，像水獭一样喜欢玩闹和社交。你的幽默感堪比脱口秀演员，总能在尴尬时刻用一句'这是可以说的吗'化解危机。朋友们形容你就是个行走的梗图生成器，跟你在一起永远不会无聊，毕竟谁能拒绝一个会手舞足蹈讲段子的朋友呢？你的社交能力就像水獭在水中游刃有余，无论什么场合都能快速适应并找到自己的位置。",
                innerDesc: "作为内在动物，水獭揭示了你内心深处那个永远长不大的孩子。虽然外表看起来是个社交达人，其实你内心住着一个需要被关注和认可的小可爱。当你独自一人时，可能会像水獭一样浮在水面上发呆，思考人生的意义（或者今晚吃什么）。你渴望真诚的连接，虽然表面上嘻嘻哈哈，但其实非常重视那些能看懂你脆弱面的朋友。你的内心世界其实比外表看起来要丰富得多，只是不轻易向人展示。",
                outerFriendsView: "在朋友眼中，你就是那个'人间充电宝'——总能给周围人带来能量。他们觉得你是个超级有趣的人，跟你在一起就像在看现场版脱口秀。你的朋友可能会偷偷把你的糗事做成表情包在群里传播，但这恰恰证明了大家有多喜欢你。他们知道，无论多糟糕的情况，你都能找到笑点，把阴天变成晴天。",
                innerSelfView: "你内心深处其实是个敏感的小可爱，虽然外表看起来像个没心没肺的快乐源泉。你会在深夜emo时翻看旧照片，也会因为一部动画电影哭得稀里哗啦。你渴望被理解和接纳，希望有人能看穿你的搞笑伪装，拥抱那个偶尔也会不安和脆弱的真实你。你的内心其实比外表要细腻得多，只是不轻易展示这一面。",
                balanceSteps: [
                    "多发挥你的幽默感，让周围的人都开心起来",
                    "在社交之余，也要留出时间照顾自己的内心需求",
                    "找到那些能理解你脆弱面的朋友，建立深度的连接",
                    "学会在适当的时候展示真实的自己，不必总是搞笑",
                    "给自己一些独处的时间，充电后再出发"
                ]
            },
            capybara: {
                name: "水豚",
                color: "#7ED321", // 绿色
                outerDesc: "作为外在动物，水豚代表你那佛系到让人羡慕的生活态度。在别人眼中，你总是那么淡定从容，仿佛世间纷扰都与你无关。你的名言是'都可以'、'没关系'、'随便啦'，活脱脱一个行走的佛系表情包。朋友们都好奇你是不是偷偷修炼了什么绝世内功，才能在任何情况下都保持那种'我就静静看着你们折腾'的超然态度。你的淡定不是装出来的，而是发自内心的平和与接纳。",
                innerDesc: "作为内在动物，水豚揭示了你内心深处对平和与和谐的极致追求。虽然外表看起来与世无争，其实你内心有一套自己的处世哲学：不争不抢，该来的总会来。你像水豚一样，拥有让所有动物都愿意亲近的特质，因为你从不评判，总是接纳。这种内在的平静让你在风暴中心也能安然处之，仿佛自带一个与世隔绝的结界。你的内心其实比外表看起来要强大得多。",
                outerFriendsView: "在朋友眼中，你就是那个'人间镇定剂'——无论多焦虑的时刻，看到你淡定的样子就能平静下来。他们觉得你是个超级可靠的朋友，因为你永远不会慌乱，总能给出最理性的建议。你的朋友可能会开玩笑说你是'穿越来的古人'，因为你的淡定程度简直不符合这个焦虑的时代。",
                innerSelfView: "你内心深处其实非常清楚自己要什么，只是不愿意为了追求而失去内心的平静。你享受独处的时光，喜欢那种'世界纷纷扰扰，与我无关'的感觉。虽然看起来随和，其实你有着坚定的内心边界，知道什么时候该说'不'。你相信，生命最好的状态就是像水豚一样，在温泉里泡着，看着天空发呆。",
                balanceSteps: [
                    "继续保持你的平和心态，这是难得的品质",
                    "在必要时也要学会表达自己的立场和需求",
                    "用你的淡定帮助焦虑的朋友，但别被他们的情绪影响",
                    "偶尔也尝试一些新鲜事物，给生活加点料",
                    "记住，佛系不等于消极，该行动时还是要行动"
                ]
            },
            raccoon: {
                name: "浣熊",
                color: "#BD10E0", // 紫色
                outerDesc: "作为外在动物，浣熊代表你那聪明机智、偶尔有点小狡猾的一面。在别人眼中，你总是那个能想出各种'骚操作'解决问题的机灵鬼。你的生存能力堪比浣熊，总能在各种环境中找到生存之道。朋友们都佩服你那'给我一个支点，我能撬动地球'的创意能力，虽然有时候你的方法确实有点'刑'。你的机智和灵活让你在复杂情况下总能找到出路。",
                innerDesc: "作为内在动物，浣熊揭示了你内心深处那个永远好奇、喜欢探索的冒险家。虽然外表看起来是个务实的问题解决者，其实你内心住着一个喜欢夜间出没的神秘探险家。你像浣熊一样，对世界充满好奇，喜欢在夜深人静时思考人生（或者翻垃圾桶找灵感）。你渴望新鲜刺激的体验，虽然表面上可能装作很稳重的样子。你的内心其实比外表要狂野得多。",
                outerFriendsView: "在朋友眼中，你就是那个'点子王'——总能在大家束手无策时想出令人拍案叫绝的解决方案。他们觉得你是个超级有趣的朋友，因为你总能带他们体验各种新奇的事物。你的朋友可能会开玩笑说你是'法外狂徒张三的远房亲戚'，因为你的某些操作确实游走在规则的边缘。",
                innerSelfView: "你内心深处其实是个浪漫的冒险家，虽然外表看起来像个务实的现实主义者。你渴望打破常规，体验不一样的生活，但又担心太过出格会带来麻烦。这种矛盾让你时而大胆时而谨慎，像浣熊一样在冒险与安全之间寻找平衡。你相信，人生就是要像浣熊偷食物一样，既要勇敢又要机智。",
                balanceSteps: [
                    "继续发挥你的创意，但要确保在安全范围内",
                    "在冒险和稳定之间找到适合自己的平衡点",
                    "把你的机智用在正道上，帮助他人解决问题",
                    "偶尔也要放下算计，单纯地享受生活",
                    "找到能理解你独特思维的朋友，分享你的奇思妙想"
                ]
            },
            sloth: {
                name: "树懒",
                color: "#F5A623", // 橙色
                outerDesc: "作为外在动物，树懒代表你那'慢生活大师'的独特气质。在别人眼中，你总是那个能躺着绝不坐着、能坐着绝不站着的节能主义者。你的行动速度让树懒都自愧不如，但你的思维却可能比谁都快。朋友们都羡慕你那'世界再卷也卷不到我'的淡定态度，虽然他们偶尔也会因为你回消息的速度而抓狂。你的慢不是懒惰，而是一种生活哲学。",
                innerDesc: "作为内在动物，树懒揭示了你内心深处对简单生活的向往。虽然外表看起来懒散，其实你内心有着自己独特的生活节奏和哲学。你像树懒一样，懂得生命不在于忙碌而在于体验，每一个缓慢的动作都是为了更好地感受当下。在这个快节奏的世界里，你坚持着自己的'慢哲学'，相信慢下来才能看见更美的风景。你的内心其实比外表要丰富得多。",
                outerFriendsView: "在朋友眼中，你就是那个'人间清醒'——在大家都在为生活奔波时，你却能保持自己的节奏。他们觉得你是个很有智慧的朋友，因为你总能看到事物的本质。你的朋友可能会开玩笑说你是'节能环保大使'，因为你的生活方式确实很低碳——连动作都省了。",
                innerSelfView: "你内心深处其实非常清楚生活的真谛，只是不愿意被社会的快节奏所绑架。你享受那种'慢工出细活'的满足感，喜欢深度体验而非浅尝辄止。虽然看起来懒散，其实你有着丰富的内心世界，只是不愿意轻易展示给外人。你相信，像树懒一样慢慢生活，才能品尝到生命最真实的味道。",
                balanceSteps: [
                    "保持你的慢节奏，这是对抗焦虑的良药",
                    "在必要时也要学会提高效率，避免错过重要机会",
                    "把你的深度思考分享给朋友，帮助他们看清本质",
                    "偶尔也尝试一些新鲜事物，给生活增添色彩",
                    "找到和你一样懂得慢生活的伙伴，互相支持"
                ]
            },
            penguin: {
                name: "企鹅",
                color: "#000000", // 黑色
                outerDesc: "作为外在动物，企鹅代表你那外表严肃内心闷骚的反差萌。在别人眼中，你总是那个穿着得体、举止优雅的绅士/淑女，但熟悉你的人都知道你内心住着一个搞笑艺人。你的反差萌堪比企鹅——表面上是个正经的上班族，实际上是个会在年会上跳极乐净土的隐藏玩家。你的优雅不是装出来的，而是骨子里的气质。",
                innerDesc: "作为内在动物，企鹅揭示了你内心深处对归属感和家庭的重视。虽然外表看起来独立自主，其实你非常珍视那些与你志同道合的'企鹅群'。你像企鹅一样，有着强烈的忠诚度和责任感，对认定的朋友和家人会无条件支持。在这个浮躁的世界里，你坚守着那些最传统也最珍贵的情感纽带。你的内心其实比外表要传统得多。",
                outerFriendsView: "在朋友眼中，你就是那个'反差萌代表'——表面上是个正经人，实际上是个沙雕。他们觉得你是个超级可靠的朋友，因为你既有企鹅的稳重，又不失幽默感。你的朋友可能会偷偷拍下你正经工作和你放飞自我的对比照，因为这反差实在太可爱了。",
                innerSelfView: "你内心深处其实是个传统又浪漫的人，虽然外表可能看起来像个现代酷哥/酷姐。你渴望建立稳定而深厚的关系，相信'慢火炖好汤'的感情哲学。虽然适应了现代社会的快节奏，但你内心始终保留着一片纯真的天地，那里有你对美好生活的所有想象。",
                balanceSteps: [
                    "继续保持你的优雅气质，这是你的独特魅力",
                    "在适当的时候展示你的幽默感，让人惊喜",
                    "珍惜你的亲密关系，它们是人生的重要支撑",
                    "在稳重和活泼之间找到平衡，做真实的自己",
                    "不要害怕展示你的传统一面，真诚最动人"
                ]
            },
            red_panda: {
                name: "小熊猫",
                color: "#FF6B6B", // 红色
                outerDesc: "作为外在动物，小熊猫代表你那可爱又有点小傲娇的独特气质。在别人眼中，你总是那个让人忍不住想rua的可爱存在，但又有自己的小脾气。你的萌点在于那种'我超凶的'但实际上毫无威慑力的反差感，像小熊猫一样，即使生气也让人觉得可爱到爆炸。你的可爱不是刻意为之，而是天生的气质。",
                innerDesc: "作为内在动物，小熊猫揭示了你内心深处对独特性和自我表达的渴望。虽然外表看起来可爱无害，其实你内心有着强烈的个人风格和审美。你像小熊猫一样，不喜欢随大流，总是坚持自己的独特品味和生活方式。在这个追求一致性的世界里，你勇敢地做那个'不一样的烟火'。你的内心其实比外表要强大得多。",
                outerFriendsView: "在朋友眼中，你就是那个'人间小可爱'——总能用你的萌点治愈大家的心情。他们觉得你是个超级有趣的朋友，因为你总能带来惊喜和欢乐。你的朋友可能会收集你的各种表情包，因为你的每个表情都值得被记录下来反复欣赏。",
                innerSelfView: "你内心深处其实是个艺术家，虽然外表看起来像个无忧无虑的小可爱。你渴望通过某种形式表达自己独特的视角和情感，可能是通过艺术、写作或者其他创意方式。虽然有时候会因为自己的与众不同而感到孤独，但你知道，正是这种独特性让你成为了如此特别的存在。",
                balanceSteps: [
                    "继续保持你的独特个性，这是你最迷人的地方",
                    "在适当的时候也要学会融入集体，找到归属感",
                    "用你的创意和艺术天赋为世界增添色彩",
                    "找到能欣赏你独特之处的朋友，互相启发",
                    "记住，可爱和强大并不矛盾，你可以两者兼具"
                ]
            },
            fox: {
                name: "狐狸",
                color: "#FF8C00", // 深橙色
                outerDesc: "作为外在动物，狐狸代表你那机智灵活、善于适应的特质。在别人眼中，你总是那个能在复杂环境中找到最优解的人，像狐狸一样聪明且富有策略。你的洞察力让你能够快速理解他人意图，并在社交场合中游刃有余。朋友们佩服你那'总能找到出路'的能力，即使面对困境也能想出巧妙的解决方案。",
                innerDesc: "作为内在动物，狐狸揭示了你内心深处对知识和智慧的渴望。虽然外表看起来务实且目标导向，其实你内心有着强烈的好奇心和探索欲。你像狐狸一样，喜欢观察和分析，总是试图理解事物背后的原理和规律。这种内在的求知欲让你不断成长，并在各种情境中都能保持清晰的思考。",
                outerFriendsView: "在朋友眼中，你就是那个'智多星'——总能提供独特的见解和实用的建议。他们觉得你是个值得信赖的顾问，因为你的判断往往准确且富有远见。你的朋友可能会开玩笑说你是'现实版的诸葛亮'，因为你的策略思维确实令人佩服。",
                innerSelfView: "你内心深处其实是个永远的学生，虽然外表看起来像个经验丰富的专家。你享受学习新知识的过程，对未知领域充满好奇。虽然擅长社交，但你更珍视那些能够深入交流的知性对话。你相信，真正的智慧不在于知道多少，而在于保持开放的心态和持续学习的热情。",
                balanceSteps: [
                    "继续发挥你的智慧和洞察力，帮助他人解决问题",
                    "在理性分析的同时，也要倾听内心的声音",
                    "保持你的好奇心，它是个人成长的动力",
                    "找到能与你进行深度交流的知己，互相学习",
                    "记住，智慧不仅来自思考，也来自体验和感受"
                ]
            },
            owl: {
                name: "猫头鹰",
                color: "#8B7355", // 棕色
                outerDesc: "作为外在动物，猫头鹰代表你那睿智深思、善于观察的特质。在别人眼中，你总是那个能在混乱中保持冷静、在复杂中看到本质的人。你的理性思维和客观分析能力让你成为团队中的智囊，朋友们在重要决策时往往会寻求你的意见。你那'夜猫子'的特性也让你在深夜时思维最为活跃。",
                innerDesc: "作为内在动物，猫头鹰揭示了你内心深处对真理和知识的追求。虽然外表看起来冷静理性，其实你内心有着丰富的哲学思考和深刻的内省。你像猫头鹰一样，喜欢在安静的环境中沉思，探索生命的深层意义。这种内在的深度让你拥有独特的视角，能够看到别人忽略的细节和联系。",
                outerFriendsView: "在朋友眼中，你就是那个'行走的百科全书'——知识渊博且见解独到。他们觉得你是个值得深交的朋友，因为与你的对话总能带来新的启发。你的朋友可能会开玩笑说你是'团队的大脑'，因为你的思考确实为集体带来了许多价值。",
                innerSelfView: "你内心深处其实是个永恒的探索者，虽然外表看起来像个稳重的学者。你享受思考的过程，对世界的奥秘充满好奇。虽然不擅长表面的社交，但你珍视那些能够深入交流的灵魂对话。你相信，真正的智慧来自于对自我和世界的持续探索与理解。",
                balanceSteps: [
                    "继续深化你的思考和洞察，这是你的天赋",
                    "在理性思考的同时，也要关注情感和人际关系",
                    "用你的智慧帮助他人看清问题的本质",
                    "找到能与你进行哲学对话的知音，互相启发",
                    "记住，知识要转化为行动，才能真正改变生活"
                ]
            }
        };

        // 页面状态管理
        let currentQuestionIndex = 0;
        let selectedQuestions = [];
        let userAnswers = [];
        
        // 初始化函数
        function init() {
            createStars();
            
            // 从60道题中随机选择40道
            selectRandomQuestions();
            
            // 绑定事件
            document.getElementById('prevQuestion').addEventListener('click', prevQuestion);
            document.getElementById('restartTest').addEventListener('click', restartTest);
            
            // 显示第一题
            displayQuestion(currentQuestionIndex);
        }
        
        // 从60道题中随机选择40道
        function selectRandomQuestions() {
            // 创建一个包含所有题目索引的数组
            const allIndices = Array.from({length: fullQuestionBank.length}, (_, i) => i);
            
            // 随机打乱数组并取前40个
            const shuffled = allIndices.sort(() => 0.5 - Math.random());
            const selectedIndices = shuffled.slice(0, 40);
            
            // 根据选中的索引获取题目
            selectedQuestions = selectedIndices.map(index => fullQuestionBank[index]);
        }
        
        // 显示题目
        function displayQuestion(index) {
            const question = selectedQuestions[index];
            document.getElementById('questionText').textContent = question.text;
            
            // 更新进度
            const progress = ((index + 1) / selectedQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${index + 1}/${selectedQuestions.length}`;
            
            // 生成选项
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, i) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option-item';
                if (userAnswers[index] === i) {
                    optionElement.classList.add('selected');
                }
                optionElement.textContent = option;
                
                optionElement.addEventListener('click', function() {
                    // 选中当前选项
                    userAnswers[index] = i;
                    
                    // 更新UI
                    document.querySelectorAll('.option-item').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    
                    // 自动跳转到下一题
                    setTimeout(() => {
                        nextQuestion();
                    }, 500);
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            // 更新上一题按钮状态
            document.getElementById('prevQuestion').style.visibility = index > 0 ? 'visible' : 'hidden';
        }
        
        // 下一题
        function nextQuestion() {
            if (userAnswers[currentQuestionIndex] === undefined) {
                return; // 未选择选项时不执行任何操作
            }
            
            currentQuestionIndex++;
            
            if (currentQuestionIndex >= selectedQuestions.length) {
                showResults();
            } else {
                displayQuestion(currentQuestionIndex);
            }
        }
        
        // 上一题
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion(currentQuestionIndex);
            }
        }
        
        // 显示结果
        function showResults() {
            // 简化处理：随机选择一个结果
            const resultKeys = Object.keys(animalTypes);
            const randomOuterKey = resultKeys[Math.floor(Math.random() * resultKeys.length)];
            const randomInnerKey = resultKeys[Math.floor(Math.random() * resultKeys.length)];
            
            const outerAnimal = animalTypes[randomOuterKey];
            const innerAnimal = animalTypes[randomInnerKey];
            
            // 更新动物图标和名称
            const outerCanvas = document.getElementById('outerAnimalCanvas');
            const innerCanvas = document.getElementById('innerAnimalCanvas');
            
            animalDrawFunctions[outerAnimal.name](outerCanvas);
            animalDrawFunctions[innerAnimal.name](innerCanvas);
            
            document.getElementById('outerAnimalName').textContent = outerAnimal.name;
            document.getElementById('outerAnimalName').className = `animal-name`;
            document.getElementById('outerAnimalName').style.color = outerAnimal.color;
            
            document.getElementById('innerAnimalName').textContent = innerAnimal.name;
            document.getElementById('innerAnimalName').className = `animal-name`;
            document.getElementById('innerAnimalName').style.color = innerAnimal.color;
            
            // 更新结果内容
            document.getElementById('outerAnimalAnalysis').textContent = outerAnimal.outerDesc;
            document.getElementById('outerAnimalFriend').textContent = outerAnimal.outerFriendsView;
            document.getElementById('innerAnimalAnalysis').textContent = innerAnimal.innerDesc;
            document.getElementById('innerAnimalFriend').textContent = innerAnimal.innerSelfView;
            
            // 更新平衡指南
            const balanceGuideContainer = document.getElementById('balanceGuide');
            balanceGuideContainer.innerHTML = '';
            
            // 创建基于动物类型的平衡指南
            const balanceSteps = outerAnimal.balanceSteps;
            
            balanceSteps.forEach((step, index) => {
                const stepElement = document.createElement('div');
                stepElement.className = 'guide-step';
                stepElement.innerHTML = `
                    <div class="step-number">${index + 1}</div>
                    <p>${step}</p>
                `;
                balanceGuideContainer.appendChild(stepElement);
            });
            
            // 生成唯一的星轨ID
            const starTrackId = 'ST-' + Math.random().toString(36).substr(2, 9).toUpperCase();
            document.getElementById('starTrackId').innerHTML = `<a href="https://xhslink.com/m/1HpWUO6Yhkn" target="_blank" style="color: var(--accent-color); text-decoration: underline;">${starTrackId}</a>`;
            
            // 切换到结果页
            document.getElementById('quizPage').classList.remove('active');
            document.getElementById('resultPage').classList.add('active');
        }
        
        // 重新测试
        function restartTest() {
            // 重置状态
            currentQuestionIndex = 0;
            userAnswers = [];
            
            // 重新选择题目（从60道中随机选40道）
            selectRandomQuestions();
            
            // 切换到测试页
            document.getElementById('resultPage').classList.remove('active');
            document.getElementById('quizPage').classList.add('active');
            
            // 显示第一题
            displayQuestion(currentQuestionIndex);
        }
        
        // 初始化应用
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>